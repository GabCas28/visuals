(this.webpackJsonpvisuals=this.webpackJsonpvisuals||[]).push([[0],{129:function(e,t,n){e.exports=n(159)},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},159:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(68),c=n.n(r),i=(n(134),n(69)),o=n(70),l=n(73),u=n(72),m=(n(135),n(136),n(10)),d=n.n(m),v=(n(27),n(1));function g(e){return parseInt(e[1])}function f(e){return parseInt(e[0])}var h=function(e){var t=e.n_notes,n=new d.a.Element("div"),a=Array.from(e.messages).filter((function(e){return f(e)<t})),s=v.e(v.f);s.domain(a.map((function(e){return f(e)})));var r=20,c=40,i=30,o=40,l=e.width-o-c,u=e.height-r-i,m=v.d().range([0,l]),h=v.d().range([u,0]),p=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],E=v.b().scale(m).tickFormat((function(e){return p[e%12]})),M=v.g(n).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+e.width+" "+e.height).append("g").attr("transform","translate(".concat(o,",").concat(r,")"));return m.domain([0,t]),h.domain([0,127]),M.append("g").attr("class","x axis").attr("transform","translate(".concat(u/20,",").concat(u,")")).call(E).selectAll("text").attr("fill",(function(e){return s(e)})).attr("stroke",(function(e){return s(e)})),M.selectAll(".bar").data(a).enter().append("rect").attr("class","bar").attr("fill",(function(e){return s(f(e))})).attr("x",(function(e){return m(f(e))})).attr("width",l/t).attr("y",(function(e){return h(g(e))})).attr("value",g).attr("height",(function(e){return u-h(g(e))})),n.toReact()};function p(e){return parseInt(e[0])}var E=function(e){var t=e.n_notes,n=new d.a.Element("div"),a=Array.from(e.messages).filter((function(e){return p(e)<t})),s=v.e(v.f);s.domain(a.map((function(e){return p(e)})));var r=20,c=20,i=20,o=20,l=e.width-50-o-c,u=e.height-r-i,m={x:l/2+5,y:u/2+5},g=v.d().range([0,l/2-50]),f=v.d().range([u,0]);g.domain([0,Math.min(m.x,m.y)]),f.domain([0,127]);var h=v.g(n).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+l+" "+u).append("g").attr("transform","translate(".concat(m.x,",").concat(m.y,")")),E=v.c().sort(null).value((function(e){return parseInt(e[1])})),M=v.a().innerRadius(50).outerRadius((function(e){return 50+g(e.value)}));return h.selectAll("path").data(E(a)).enter().append("path").attr("class","arc").attr("fill",(function(e){return s(p(e.data))})).attr("d",(function(e){return M(e)})).attr("stroke","black").attr("stroke-width",3),n.toReact()};function M(e){return parseInt(e[0])}var w=function(e){var t=e.n_notes,n=new d.a.Element("div"),a=Array.from(e.messages).filter((function(e){return M(e)<t})),s=v.e(v.f);s.domain(a.map((function(e){return M(e)})));var r=20,c=20,i=20,o=20,l=e.width-50-o-c,u=e.height-r-i,m={x:l/2+5,y:u/2+5},g=v.d().range([0,l/2]),f=v.d().range([u,0]);g.domain([0,Math.min(m.x,m.y)]),f.domain([0,127]);var h=v.g(n).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+l+" "+u).append("g").attr("transform","translate(".concat(m.x,",").concat(m.y,")")),p=v.c().sort(null).value((function(e){return 12})),E=v.a().innerRadius(0).outerRadius((function(e){return g((t=e.data,parseInt(t[1])));var t}));return h.selectAll("path").data(p(a)).enter().append("path").attr("class","arc").attr("fill",(function(e){return s(M(e.data))})).attr("d",(function(e){return E(e)})).attr("stroke","black").attr("stroke-width",3),n.toReact()};var D=function(e){var t=e.n_notes,n=e.messages;return s.a.createElement("div",{className:"App"},s.a.createElement("div",{id:"graph-container",className:"card-panel black lighten-2 row"},s.a.createElement("div",{className:"col s12 m5"},s.a.createElement(h,{n_notes:t,messages:n,width:"600",height:"400"})),s.a.createElement("div",{className:"col s12 m7"},s.a.createElement("div",{className:"col s12 m6"},s.a.createElement(E,{n_notes:t,messages:n,width:"400",height:"370"})),s.a.createElement("div",{className:"col s12 m6"},s.a.createElement(w,{n_notes:t,messages:n,width:"400",height:"370"})))))},I=n(6),b=n(7);n(67);var x=function(e){var t=e.selectChromas;return s.a.createElement("div",{className:"col s12"},s.a.createElement("select",{onChange:function(e){return function(e){t(e.target.value)}(e)}},s.a.createElement("option",{value:"12"},"12 notes"),s.a.createElement("option",{value:"24"},"24 notes"),s.a.createElement("option",{value:"36"},"36 notes"),s.a.createElement("option",{value:"48"},"48 notes"),s.a.createElement("option",{value:"60"},"60 notes"),s.a.createElement("option",{value:"72"},"72 notes"),s.a.createElement("option",{value:"84"},"84 notes"),s.a.createElement("option",{value:"96"},"96 notes"),s.a.createElement("option",{value:"108"},"108 notes"),s.a.createElement("option",{value:"120"},"120 notes")))};var N=Object(b.f)((function(e){return s.a.createElement("nav",{className:"nav-wrapper blue-grey darken-4"},s.a.createElement("div",{className:"container"},s.a.createElement(I.b,{to:"/",className:"left brand-logo"},"Midi Visuals"),s.a.createElement("ul",{className:"right"},s.a.createElement("li",null,s.a.createElement(I.c,{exact:!0,to:"/"},"Home")),s.a.createElement("li",null,s.a.createElement(I.c,{to:"/bar"},"Bar Chart")),s.a.createElement("li",null,s.a.createElement(I.c,{to:"/doughnut"},"Doughnut Chart")),s.a.createElement("li",null,s.a.createElement(I.c,{to:"/pie"},"Pie Chart")),s.a.createElement("li",null,s.a.createElement(x,{selectChromas:e.selectChromas})))))}));var y=function(e){var t=e.devices,n=e.deselectDevice,r=e.selectDevice,c=e.testMessages,i=e.mounted,o=Object(b.e)().pathname;function l(e){var t="listening"===e.action?"col offset-s2 s1 devices btn lighten-4 purple":"col offset-s2 s1 devices btn lighten-4 green";return s.a.createElement("button",{className:t,onClick:function(t){!function(e,t){"Mute"===e.target.innerHTML?(e.target.classList.toggle("green"),e.target.innerHTML="Listen",n(t)):"Listen"===e.target.innerHTML&&(e.target.classList.toggle("green"),e.target.innerHTML="Mute",r(t))}(t,e)}},"listening"===e.action?"Mute":"Listen")}Object(a.useEffect)((function(){i&&0===t.length&&c()}));var u=function(e){return e.length>0?e.map((function(e){return s.a.createElement("li",{className:"collection-item grey-text black row",key:e.id},s.a.createElement("div",{className:"col s2"},"Device Name: ",e.name),s.a.createElement("div",{className:"col s3"},"Manufacturer: ",e.manufacturer," "),s.a.createElement("div",{className:"col s1"},"Type: ",e.type),s.a.createElement("div",{className:"col s3"},"State: ",e.state,", ",e.action),l(e))})):s.a.createElement("li",{className:"collection-item grey-text black row"},s.a.createElement("div",{className:"center col s12"},"No Midi devices found."))}(t);return s.a.createElement("div",{className:"/"===o?"":"hide"},s.a.createElement("ul",{className:"collection"},u))},k=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).testMessages=function(){if(!1===a.state.test){var e=new Map(Array(120).fill().map((function(e,t){return[t,t*(127/a.state.n_notes)]})));a.setState({messages:e,test:!0})}},a.initialMessages=function(){var e=new Map(Array(128).fill().map((function(e,t){return[t,0]})));a.setState({messages:e})},a.addMidiDevice=function(e){var t=a.state.devices;t.push(e),a.setState({devices:t})},a.deselectDevice=function(e){var t=a.state.selectedDevices;t=t.filter((function(t){return t!==e})),a.state.midi.inputs.forEach((function(t){t===e&&(t.onmidimessage=null,t.action="not listening")})),a.setState({selectedDevices:t})},a.selectDevice=function(e){var t=a.state.selectedDevices;t.push(e),a.state.midi.inputs.forEach((function(t){t===e&&(t.onmidimessage=a.onMIDIMessage,t.action="listening")})),a.setState({selectedDevices:t})},a.onMIDISuccess=function(e){console.log("MIDI ready!"),a.setState({midi:e,mounted:!0}),a.listInputsAndOutputs(e),a.startLoggingMIDIInput(e)},a.onMIDIFailure=function(e){console.log("Failed to get MIDI access - "+e)},a.listInputsAndOutputs=function(e){e.inputs.forEach((function(e){a.addMidiDevice(e),a.selectDevice(e)}))},a.onMIDIMessage=function(e){var t=a.state.messages;t.set(e.data[1],e.data[2]),a.setState({messages:t})},a.startLoggingMIDIInput=function(e){e.inputs.forEach((function(e){e.onmidimessage=a.onMIDIMessage}))},a.routes=[{path:"/",component:"Home"}],a.selectChromas=function(e){a.setState({n_notes:e,test:!1})},a.state={n_notes:12,devices:[],selectedDevices:[],messages:new Map([]),test:!1,mounted:!1},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.initialMessages(),navigator.requestMIDIAccess({sysex:!0}).then(this.onMIDISuccess,this.onMIDIFailure)}},{key:"render",value:function(){var e=this;return s.a.createElement(I.a,null,s.a.createElement("div",{className:"App"},s.a.createElement(N,{selectChromas:this.selectChromas}),s.a.createElement("div",{className:""},s.a.createElement(y,{mounted:this.state.mounted,devices:this.state.devices,deselectDevice:this.deselectDevice,selectDevice:this.selectDevice,testMessages:this.testMessages})),s.a.createElement(b.a,{exact:!0,path:"/",render:function(t){return s.a.createElement(D,Object.assign({},t,{mounted:e.state.mounted,devices:e.state.devices,selectDevice:e.selectDevice,deselectDevice:e.deselectDevice,messages:e.state.messages,n_notes:e.state.n_notes,testMessages:e.testMessages}))}}),s.a.createElement(b.a,{exact:!0,path:"/doughnut",render:function(t){return s.a.createElement(E,Object.assign({},t,{n_notes:e.state.n_notes,messages:e.state.messages,width:window.innerWidth,height:window.innerHeight-100}))}}),s.a.createElement(b.a,{exact:!0,path:"/pie",render:function(t){return s.a.createElement(w,Object.assign({},t,{n_notes:e.state.n_notes,messages:e.state.messages,width:window.innerWidth,height:window.innerHeight-100}))}}),s.a.createElement(b.a,{exact:!0,path:"/bar",render:function(t){return s.a.createElement(h,Object.assign({},t,{n_notes:e.state.n_notes,messages:e.state.messages,width:window.innerWidth,height:window.innerHeight-100}))}})))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},27:function(e,t,n){},67:function(e,t,n){}},[[129,1,2]]]);
//# sourceMappingURL=main.723c8dc7.chunk.js.map